# NodeJS

ìµœê·¼ **NodeJS** ê°€ ë„ˆë¬´ ì¬ë°Œì–´ì„œ NodeJS ë¡œ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ìˆë‹¤. NPM ì´ë€ ìƒíƒœê³„ë„ ì¬ë°Œê³ , ì´ëŸ° **ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‰½ê²Œ ê¸°ì—¬í•˜ê³  ë§Œë“¤ ìˆ˜ ìˆëŠ” ë§›**ì— ì“°ëŠ” ê²ƒ ê°™ë‹¤.
ê·¸ë ‡ë‹¤ë©´ ì´ **NodeeJS ëŠ” ë¬´ì—‡ì´ë©°, ì–´ë–»ê²Œ ë™ì‘í•˜ê¸¸ë˜ íšŒì‚¬ë“¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒ**ì¼ê¹Œ?

## NodeJS ì†Œê°œ

ê³µì‹ë¬¸ì„œì— ì í˜€ì ¸ ìˆëŠ” NodeJS ì˜ ì†Œê°œê¸€ì„ ì½ì–´ë³´ì. ì£¼ìš”ì„¤ëª…ìœ¼ë¡œ ì–˜ê¸°í•˜ëŠ” ê±´ **ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì£¼ë„ì˜ JavaScript ëŸ°íƒ€ì„**ì´ë¼ê³  í•œë‹¤.
ê·¸ë ‡ë‹¤ë©´, **ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì£¼ë„**ëŠ” ë¬´ì—‡ì¼ê¹Œ? ì¼ë‹¨ ìš°ë¦¬ëŠ” **ë™ê¸° ë¹„ë™ê¸°**ì— ê´€í•´ ê°„ë‹¨í•˜ê²Œ ì•Œ í•„ìš”ê°€ ìˆë‹¤.

**NodeJS ì†Œê°œê¸€ : https://nodejs.org/ko/about/**

**ë™ê¸° / ë¹„ë™ê¸°**ëŠ” ë¬´ì—‡ì¼ê¹Œ ìš°ë¦¬ëŠ” ë¬´ì–¸ê°€ **ë™ê¸°í™”ë¥¼ ë§ì¶°ê°€ë©´ì„œ í•´ë‚˜ê°¸ì•¼ í•˜ëŠ” ì‘ì—…ì„ ë™ê¸°ì ì¸ ì‘ì—…**ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

ë­ë“  ì–´ë µê²Œ ì„¤ëª…í•˜ëŠ”ê²ƒë³´ë‹¤ ì‰½ê²Œ ì„¤ëª…í•˜ëŠ”ê²Œ ì¢‹ì€ ê¸€ì´ë¯€ë¡œ, ì‹¤ìƒí™œì˜ ì˜ˆì‹œë¥¼ í•˜ë‚˜ë“¤ì–´ë³´ê² ë‹¤.

## ì€í–‰ ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‘ì—… ì˜ˆì‹œ

ë§Œì•½ ìš°ë¦¬ê°€ ì€í–‰ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ì…ê¸ˆ ë¶€ë¶„ì„ ë§Œë“ ë‹¤ê³  í•´ë³´ì.
ë§Œë“¤ê²Œ ëœë‹¤ë©´ ë¡œì§ì€ ì´ë ‡ê²Œ ë  ê²ƒì´ë‹¤.

1. ì…ê¸ˆí•  ëˆì„ ì…ë ¥í•œë‹¤.

2. ì…ê¸ˆí•  ìƒëŒ€ë°©ì„ ì…ë ¥í•œë‹¤.

3. ë‚´ ëˆì„ ë¨¼ì ¸ ì°¨ê° í•œë‹¤.

4. ë§Œì•½ ëˆì´ ë¶€ì¡±í•˜ë‹¤ë©´ ì…ê¸ˆ í”„ë¡œì„¸ìŠ¤ëŠ” ì·¨ì†Œëœë‹¤.

5. ë§Œì•½ ëˆì´ ë¶€ì¡±í•˜ì§€ ì•Šë‹¤ë©´ ë‚´ ì”ê³ ê°€ ì •ìƒì ìœ¼ë¡œ ì°¨ê°ë˜ê³  ìƒëŒ€ì—ê²Œ ëˆì´ ì…ê¸ˆëœë‹¤.

6. ìƒëŒ€ë°©ì—ê²Œ ëˆì´ ì…ê¸ˆë˜ì—ˆëŠ”ì§€ í™•ì¸í•œë‹¤.

7. ì •ìƒì ìœ¼ë¡œ ì…ê¸ˆë˜ì—ˆë‹¤ë©´ ì •ìƒì…ê¸ˆ ì¹´ì¹´ì˜¤í†¡ ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ì¤€ë‹¤.

8. ì •ìƒì ì¸ ì…ê¸ˆì´ë¯€ë¡œ ì•Œë¦¼í˜ì´ì§€ë¥¼ ë³´ë‚´ì¤€ë‹¤.

ìš°ë¦¬ëŠ” ìœ„ì˜ í”„ë¡œì„¸ìŠ¤ì—ì„œ **ë™ê¸°ì  ì‘ì—…ê³¼ ë¹„ë™ê¸°ì  ì‘ì—…**ì„ ë¶„ë¦¬í•´ë³¼ ê²ƒ ì´ë‹¤.

ë™ê¸°ì  ì‘ì—…ì€ ì‰½ê²Œ Sync ë¥¼ ë§ì¶”ë©´ì„œ í•´ì•¼í•˜ëŠ” ì‘ì—…ì¸ë°, ìš°ë¦¬ê°€ ë§Œì•½ 3~5 ë²ˆ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“ ë‹¤ê³  í•´ë³´ì 4 ë²ˆ í”„ë¡œì„¸ìŠ¤ê°€ ì§„í–‰ë˜ê¸° ìœ„í•´ì„œëŠ”
3ë²ˆ í”„ë¡œì„¸ìŠ¤ì—ì„œ ë°˜ë“œì‹œ **ë‚´ í†µì¥ì˜ ì”ê³ ë¥¼ í™•ì¸**í•˜ê³ , **ì°¨ê°í• ìˆ˜ ìˆëŠ”ì§€ë¥¼ í™•ì¸**í•˜ê³  **ì…ê¸ˆ**ì„ í•´ì•¼í•  ê²ƒì´ë‹¤.

ì¦‰ ìš°ë¦¬ëŠ” ë³´ë‚´ëŠ” ì‚¬ëŒì˜ í†µì¥ì”ê³ ì— ëŒ€í•œ ë™ê¸°í™”ë¥¼ ê³„ì†í•´ì„œ í•´ì¤˜ì•¼ í•œë‹¤. **ë§Œì•½ ë™ê¸°í™”ë¥¼ í•˜ì§€ ì•Šê³ ë„ í•  ìˆ˜ ìˆëŠ” ì‘ì—…ì´ë¼ê³  í•´ë³´ê³  ìœ„ì˜ ë¡œì§ì„ ë°”ê¿”ë³´ì**

1. ë‚´ í†µì¥ì˜ ì”ê³ ë¥¼ í™•ì¸

2. ìµœì‹ ì˜ ì”ê³ ë¥¼ í™•ì¸í–ˆëŠ”ì§€ ì•ˆí–ˆëŠ”ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ í˜„ì¬ ì”ê³ ì—ì„œ ì°¨ê°í• ìˆ˜ ìˆëŠ”ì§€ë„ í™•ì¸

3. ìµœì‹ ì˜ ì”ê³ ê°€ í™•ì¸ë¬ëŠ”ì§€ ì•ˆë¬ëŠ”ì§€ëŠ” ëª¨ë¥´ê² ì§€ë§Œ ì…ê¸ˆí•œë‹¤. 

ì•„ë§ˆë„ ìœ„ì™€ ê°™ì´ ë™ì‘í• ê²ƒì´ë‹¤. ì¦‰ ë¹„ë™ê¸°ëŠ” **1ë²ˆ 2ë²ˆ 3ë²ˆì„ ëª¨ë‘ í•˜ë‚˜ì˜ ì‚¬ê±´(Event)** ë¡œ ë³´ê³ , **ì´ë²¤íŠ¸ ì²˜ë¦¬í**ì— ë„£ì–´ì„œ **ê°ê¸° ë‹¤ë¥¸ ì—°ê²°ì„±ì´ ì—†ëŠ” ì´ë²¤íŠ¸ë‹ˆê¹Œ ìš°ë¦¬ëŠ” Sync** ë¥¼ ì•ˆë§ì¶”ê³ ë„ ì²˜ë¦¬í•´ë„ ë˜! ë¼ê³  í•˜ëŠ”ê²ƒì´ë‹¤. ë§ì´ ì–´ë ¤ìš¸ ìˆ˜ë„ ìˆë‹¤. ê·¼ë° ì‰½ê²Œ ìƒê°í•´ë³´ì. ìœ„ì˜ ë¡œì§ëŒ€ë¡œ ì€í–‰ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ë©´ ë‹¹ì‹ ì˜ ì€í–‰ì€ ë§í•  ìˆ˜ ë°–ì—ì—†ì„ ê²ƒì´ë‹¤. 

ì™œëƒ **ì”ê³ ë¥¼ í™•ì¸í•˜ëŠ” ì´ë²¤íŠ¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë„ì¤‘ì—ë„ ì”ê³ ë¥¼ ì°¨ê°í•˜ëŠ” ì´ë²¤íŠ¸ê°€ ë™ì‹œì ìœ¼ë¡œ ì²˜ë¦¬**ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. (**ë³‘ë ¬ì´ë‘ ë™ì‹œë¥¼ í—·ê°ˆë¦¬ì§€ ë§ì!**)

ê·¸ë ‡ë‹¤ë©´ **ìš°ë¦¬ëŠ” ì–¸ì œ ë¹„ë™ê¸°ì ì¸ ì‚¬ê³ ë¥¼ ê°€ì§€ê³  ì‘ì—…ì„ ì²˜ë¦¬**í•´ì•¼ í• ê¹Œ? ì€í–‰ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ 7ë²ˆ ë¶€ë¶„ì„ ë³´ì

7. ì •ìƒì ìœ¼ë¡œ ì…ê¸ˆì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´ => **ì¹´ì¹´ì˜¤í†¡ ë©”ì„¸ì§€ë¥¼ ë°œì†¡**í•œë‹¤.

ìš°ë¦¬ê°€ ì…ê¸ˆì´ ì™„ë£Œë˜ê¸° ì „ê¹Œì§€ëŠ” Sync ë¥¼ ë§ì¶°ì¤˜ì•¼í•˜ëŠ” ì‘ì—…ì´ ëŒ€ë¶€ë¶„ì¼ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ ê·¸ ì´í›„ ì¹´ì¹´ì˜¤í†¡ ë©”ì„¸ì§€ë¥¼ ë³´ë‚´ì£¼ëŠ” ë¶€ë¶„ì€ ê·¸ë‹¤ì§€ ë™ê¸°í™”ë¥¼ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.
ì™œëƒ ì´ë¯¸ ì¼ë ¨ì˜ **ë™ê¸°í™”ë¥¼ ë§ì¶°ì¤˜ì•¼ í•˜ëŠ” ì…ê¸ˆ ì‘ì—…ì€ ì™„ë£Œ**ë˜ì—ˆê³ , ìš°ë¦¬ëŠ” **ì•Œë¦¼ ë©”ì„¸ì§€ ì „ì†¡**ì´ë¼ëŠ” **ë˜ ë‹¤ë¥¸ ì´ë²¤íŠ¸**ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤.

ê·¸ë˜ì„œ ìš°ë¦¬ëŠ” ì´ê±¸ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ **ì´ë²¤íŠ¸ ì²˜ë¦¬ íë¡œ í•´ë‹¹ ì´ë²¤íŠ¸ë¥¼ ë³´ë‚¼ ê²ƒ**ì´ë‹¤. 
ê·¸ëŸ¼ ì´ë²¤íŠ¸ íì— ìˆëŠ” ì‘ì—…ì„ ì–´ë–¤ **ë…¸ë™ì ìŠ¤ë ˆë“œ**ê°€ ì²˜ë¦¬í•  ê²ƒì´ë‹¤. ë³´í†µì€ ì´ ë…¸ë™ì ìŠ¤ë ˆë“œë¥¼ **Worker Thread** ë¼ê³  í•œë‹¤.

ë§Œì•½ ì¹´ì¹´ì˜¤í†¡ **ì•Œë¦¼ì„ ë³´ë‚´ë‹¤ê°€ ì˜¤ë¥˜ê°€ ë‚˜ì„œ ì¢…ë£Œ**ë˜ë„, ê²°êµ­ ìš°ë¦¬ì˜ **ì…ê¸ˆì´ ëœ ì‚¬ì‹¤ì€ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤.** ì™œëƒë©´ **ë‹¤ë¥¸ ì´ë²¤íŠ¸**ì´ê¸° ë•Œë¬¸ì´ë‹¤.

ì´ë¯¸ **ì…ê¸ˆ ì´ë²¤íŠ¸ëŠ” ì¢…ë£Œëœ í›„ë‹¤. ì´ì ì´ ìƒë‹¹íˆ ì¤‘ìš”í•œ ê²ƒ**ì´ë‹¤. ì¦‰, **ë™ê¸°ì  ì´ë²¤íŠ¸ëŠ” ë¬´ì–¸ê°€ í•˜ë‚˜ê°€ ì˜ëª»ë˜ë©´ Roll back ë˜ì•¼ í•  ì‘ì—…ì¼ í™•ë¥ íˆ ìƒë‹¹íˆ ë†’ë‹¤.**
ì™œëƒí•˜ë©´ **ì „ì²´ í”„ë¡œì„¸ìŠ¤ê°€ ë™ê¸°í™”ë¥¼ ì§„í–‰í•˜ë©° ì´ë£¨ì–´ì§€ê¸°ì—**, ë­ **í•˜ë‚˜ë¼ë„ ì˜ëª»ëœë‹¤ë©´ ì´ì „ì— ë™ê¸°í™”ë¥¼ ë§ì¶”ì—ˆë˜ ì‘ì—… ì¡°ì°¨ë„ ë˜ì„œëŠ” ì•Šì•„ì•¼ í•  ì‘ì—…ì´ ë  ìˆ˜ë„ ìˆê¸° ë•Œë¬¸**ì´ë‹¤.

ê·¸ëŸ¬ë©´ ë°˜ëŒ€ë¡œ **ë¹„ë™ê¸°ì  ì‘ì—…ì€ ë‹¤ë¥¸ ì‚¬ê±´(Event)**ì´ë‹¤. ì¦‰ ì›ƒê¸°ê²Œ ì–˜ë¥¼ ë“¤ìë©´ **A ì¥ì†Œì—ì„œ ì‚´ì¸ì‚¬ê±´ì´ ì¼ì–´ë‚˜ê³ , B ì¥ì†Œì—ì„œ ë„ë‚œ ì‚¬ê±´ì´ ì¼ì–´ë‚¬ëŠ”ë° ìš°ë¦¬ëŠ” ì´ ì‚¬ê±´ì˜ ê³µí†µì **ì€ ë”±íˆ ì—†ê¸°ì—
ë¬´ì–¸ê°€ ì‚¬ê±´ê°„ì˜ **êµë¥˜(ë™ê¸°í™”)ë¥¼ í•  í•„ìš”ê°€ ì—†ëŠ” ê²ƒì´ë‹¤. ì¢‹ì€ ì˜ˆì‹œì¸ ì¤„ì€ ëª¨ë¥´ê² ìœ¼ë‚˜, ì—¬íŠ¼ ì‚¬ê±´ ì¤‘ì‹¬ìœ¼ë¡œ ìƒê°í•˜ë©´ ë‹¤ë¥¸ ì´ë²¤íŠ¸**ì´ë‹¤.

ê·¸ë ‡ë‹¤ë©´ ì´ì œ **ë‹¤ì‹œ NodeJS ë¡œ ëŒì•„ê°€ë³´ì!** ì•„ê¹Œ NodeJS ëŠ” **ë¹„ë™ê¸° ì´ë²¤íŠ¸ ì£¼ë„** ë¼ê³  ê³µì‹ë¬¸ì„œì— ì í˜€ìˆë‹¤ê³  í–ˆë‹¤. ì´ì œì•¼ ì™œ ì €ëŸ° ë§ì„ ì¼ëŠ”ì§€ ì´í•´ê°€ ì˜ ê°ˆê²ƒì´ë¼ê³  ìƒê°í•œë‹¤.

ê·¸ëŸ¼ NodeJS ëŠ” ì•„í‚¤í…ì³ë¥¼ ì–´ë–»ê²Œ êµ¬ì„±í•˜ê³  ìˆê¸°ì— ì´ëŸ¬í•œ ë™ì‘ì´ ê°€ëŠ¥í•  ê²ƒì¼ê¹Œ?

## NodeJS Architecture

- ìµœëŒ€í•œ ê³µì‹ë¬¸ì„œì— ì˜ê±°í•˜ì—¬ ì„¤ëª…í•˜ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.

### V8

ì¼ë‹¨ NodeJS ëŠ” **Google ì˜ V8 ì—”ì§„**ì„ ì±„íƒí•˜ì˜€ìŠµë‹ˆë‹¤. V8 ì—”ì§„ì€ C++ ë¡œ ë§Œë“¤ì–´ì¡Œìœ¼ë©° **ê³ ì„±ëŠ¥ì˜ WebAssembly & JavaScript ì—”ì§„**ì…ë‹ˆë‹¤.
V8 ì—”ì§„ì´ ë” ê¶ê¸ˆí•œ ì‚¬ëŒì€ ì•„ë˜ ê³µì‹ ë„í ë¨¼íŠ¸ë¥¼ ì½ì–´ë³´ë©´ ì¢‹ì„ê²ƒ ê°™ë‹¤.

- V8 : https://v8.dev/docs

### libuv

libuv ëŠ” C ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ë…¼ **ë¸”ë¡œí‚¹ I/O ì‘ì—…ì„ ì§€ì›í•˜ëŠ” ëª¨ë“  í”Œë«í¼ì—ì„œ ì¼ê´€ëœ ì¸í„°í˜ì´ìŠ¤ë¡œ ì¶”ìƒí™”** í•˜ëŠ”ë° ì‚¬ìš©í•©ë‹ˆë‹¤. NodeJS ì—ì„œ ì‚¬ìš©í•˜ëŠ” í° ì´ìœ ëŠ” 
ìš´ì˜ì²´ì œì—ì„œ ë¹„ë™ê¸°ë¡œ ì²˜ë¦¬ë  ìˆ˜ ìˆëŠ” **ì‘ì—…ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ìŠ¤ë ˆë“œí’€ì„ í¬í•¨**í•˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤.

- ê°„ë‹¨íˆ ì‹±ê¸€ìŠ¤ë ˆë“œë¼ ë§í•˜ì§€ë§Œ, ì´ëŸ° ìŠ¤ë ˆë“œë¥¼ ì´ìš©í•˜ê¸°ë„ í•œë‹¤. ì—¬íŠ¼, **ë¸”ë¡œí‚¹ì‘ì—…ì´ ìˆì„ ìˆ˜ ë°–ì— ì—†ê¸°ì— libuv ëŠ” NodeJS ì˜ í•µì‹¬**ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.

### NodeJS êµ¬ì¡°ëŠ”?

ì—¬ëŸ¬ê°€ì§€ êµ¬ì¡° ì‚¬ì§„ì„ ë§ì´ë´¤ì§€ë§Œ, ì •í™•í•œ ì‚¬ì§„ì€ ì•„ë˜ì‚¬ì§„ì´ ì•„ë‹ê¹Œ ì‹¶ë‹¤. 

![](https://rlogimgcontainer.s3.ap-northeast-2.amazonaws.com/á„Œá…¥á†¼á„‰á…¥á†¨á„€á…®á„Œá…©.png)

ì¦‰ ì•„ê¹Œ ìœ„ì—ì„œ **ë™ê¸° / ë¹„ë™ê¸°ì—ì„œ ì„¤ëª…í•œ ë°©ì‹ìœ¼ë¡œ ëª¨ë“  ì´ë²¤íŠ¸ë“¤ì€ ì´ë²¤íŠ¸ ë£¨í”„**ì— ë“¤ì–´ê°€ê²Œ ëœë‹¤.

**ë…¸ë“œ JS ì˜ ì´ë²¤íŠ¸ ë£¨í”„ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤. (ê³µì‹ Document ì‚¬ì§„ì´ë‹¤.)**

![](https://rlogimgcontainer.s3.ap-northeast-2.amazonaws.com/á„‹á…µá„‡á…¦á†«á„á…³á„…á…®á„‘á…³.png)

ì¦‰ NodeJS ëŠ” ì´ëŸ°ì‹ìœ¼ë¡œ **íŠ¹ì • ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´, ì´ë²¤íŠ¸ ë£¨í”„ì— ë“¤ì–´ì˜¤ê³ , ì²˜ë¦¬í•˜ê³  ì‘ì—…ì´ ì™„ë£Œë˜ë©´ ì½œë°±ì„ ë°œìƒ**ì‹œí‚¨ë‹¤. 
**Blocking ì´ ìˆëŠ” ì‘ì—…ì´ ìˆì„ ê²½ìš° libuv ë‚´ë¶€ì˜ libio ë¥¼ ì´ìš©í•˜ì—¬ ì²˜ë¦¬**í•œë‹¤.

ì¦‰ ì‰½ê²Œ ë§í•´ ë©´ì ‘ ë‹¨ê³¨ë¬¸ì œì¸ 

```
setTimeout(callback, 1000);
```

ì´ ë¬´ì¡°ê±´ **1ì´ˆë’¤ì— ì‹¤í–‰ë˜ëŠ”ê°€ë¥¼ ë¬¼ì–´ë³´ë©´ ì¥ë‹´í•  ìˆ˜ ì—†ë‹¤ê³  ì–˜ê¸°í•˜ëŠ” ê²ƒì´ ì •ë‹µ**ì¸ ì´ìœ ê°€, ê°ê¸° ë‹¤ë¥¸ ì´ë²¤íŠ¸ë¡œ ë¶„ë¦¬ë˜ê¸°ì— ìš°ë¦¬ê°€ NodeJS ì—ê²Œ ìœ„ì™€ ê°™ì€ ì½”ë“œë¡œ ë§í•˜ëŠ” ê²ƒì€
setTimeout ì´ë²¤íŠ¸ê°€ ì²˜ë¦¬ë˜ê³  1ì´ˆí›„ì— ê°€ê¹Œìš´ ì œì¼ ë¹ ë¥¸ ì‹œê°„ì— ë‚´ê°€ ì˜ˆì •í•œ ì½œë°±ì„ ì‹¤í–‰ì‹œì¼œ ì¤¬ìœ¼ë©´ ì¢‹ê² ì–´! ë¼ëŠ” ê²ƒì´ë‹¤.

ì¦‰ ì‰½ê²Œ ì–˜ê¸°í•˜ë©´ ìŠ¤ì¼€ì¥´ ì˜ˆì•½ì„ í•˜ëŠ”ê±°ì§€ ê°•ì œë¡œ ì‹œê°„ëŒ€ë¥¼ ì¡ì„ ìˆ˜ ìˆëŠ”ê²Œ ì•„ë‹ˆë€ ë§ì´ë‹¤.

ì¼ë‹¨ ì´ê°œë…ì„ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ì•„ë˜ì˜ ì‚¬ì§„ì„ í•œë²ˆ ë³´ì **ë…¸ë“œ JS ì˜ ì´ë²¤íŠ¸ ë£¨í”„ ê° ì„¹ì…˜**ì— ëŒ€í•œ ì„¤ëª…ì´ë‹¤.

![](https://rlogimgcontainer.s3.ap-northeast-2.amazonaws.com/á„‰á…¦á†¨á„‰á…§á†«.png)

ê·¸ëŸ¼ ìœ„ì˜ ì‚¬ì§„ì„ ë³´ì•˜ìœ¼ë‹ˆ ê³µì‹ë¬¸ì„œì˜ ì½”ë“œë¥¼ ë³´ë©° êµ­ë£° ì§ë¬¸ì¸ setTimeout ì— ëŒ€í•´ ì•Œì•„ë³´ì!

```javascript
const fs = require('fs');

function someAsyncOperation(callback) {
  // ì´ ì‘ì—…ì´ ì™„ë£Œë˜ëŠ”ë° 95msê°€ ê±¸ë¦°ë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.
  fs.readFile('/path/to/file', callback);
}

const timeoutScheduled = Date.now();

const timerCallback = () => {
  const delay = Date.now() - timeoutScheduled;

  console.log(`${delay}ms have passed since I was scheduled`);
};

const someAsyncCallback = () => {
  const startCallback = Date.now();

  // 10msê°€ ê±¸ë¦´ ì–´ë–¤ ì‘ì—…ì„ í•©ë‹ˆë‹¤.
  while (Date.now() - startCallback < 10) {
    // ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
  }
}

setTimeout(timerCallback, 100); // TimeOut Event!!!!ğŸ˜ƒ

// ì™„ë£Œí•˜ëŠ”ë° 95msê°€ ê±¸ë¦¬ëŠ” someAsyncOperationë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

someAsyncOperation(someAsyncCallback);

```

ë§Œì•½ ì—¬ëŸ¬ë¶„ì˜ ìƒê°ëŒ€ë¡œ Timeout Event ë°œìƒí›„ 100ms ì•ˆì— ì‘ì—…ì´ callback ì´ ì‘ë™í•´ì•¼ í•œë‹¤ë©´, console.log ì— ì–¼ë§ˆë‚˜ ê±¸ë ¸ëŠ”ì§€ì— 100ms ë¡œ ë©”ì„¸ì§€ê°€ ë‚˜ì˜¬ ê²ƒì´ë‹¤.
ê·¸ëŸ¬ë©´ ìš°ë¦¬ê°€ ì‘ì„±í•œ ì½”ë“œê°€ NodeJS ì˜ ì´ë²¤íŠ¸ ë£¨í”„ìƒì—ì„œ ì–´ë–»ê²Œ ì¡´ì¬í•˜ëŠ” ì§€ ì•Œì•„ë³´ì, ë…¸ë“œëŠ” ìš°ë¦¬ì˜ ì½”ë“œë¥¼ ì½ì„ ê²ƒì´ê³  `setTimeout(timerCallback, 100);` ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ ë¨¼ì ¸ ë§ì´í•œë‹¤.
ê·¸ë ‡ê²Œ ë˜ë©´ 100 ì´ˆ ë’¤ì— **timerCallback ì„ ì‘ë™í•˜ë¯€ë¡œ timer Phase ì— ë„£ì„ ê²ƒ**ì´ë‹¤.

ê·¸ ì´í›„ **someAsyncOperation ì´ poll íì— ë“¤ì–´ì˜¤ê³  ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‘ë™**í• ê²ƒì´ê³ , 95ms í›„ì— fs.readFile ì´ ëë‚˜ë©´ poll Phase ì— someAsyncCallback ì´ ì¶”ê°€ ë  ê²ƒì´ë‹¤. ê·¸ë˜ì„œ 10ms ê°€ ë” ê±¸ë¦¬ê³  check Phaseë¡œ ë„˜ì–´ê°€ì„œ ì‘ì—…ì´ ì™„ë£Œë¥¼ ë  ê²ƒì´ë‹¤.
ì—¬ê¸°ì„œ fs.readFile ê°™ì€ ê²½ìš° Blocking ì‘ì—…ì¸ë°, ìœ„ì—ì„œ ì„¤ëª…í–ˆë“¯ libuv ì•ˆì˜ ìŠ¤ë ˆë“œ í’€ì„ ì´ìš©í•´ì„œ ì²˜ë¦¬ í•œë‹¤. (ì´ëŸ¬ë©´ ë©€í‹° ìŠ¤ë ˆë“œê°€ ì•„ë‹ˆëƒ? ë¼ê³  í•˜ëŠ”ë° ê¸°ì € ë‹¨ê³„ì˜ ì»¤ë„ ìŠ¤ë ˆë“œ í’€ì„ ë¹Œë¦¬ê¸°ì—
NodeJS ìì²´ëŠ” ì‹±ê¸€ìŠ¤ë ˆë“œ ë¼ê³  ìƒê°í•œë‹¤.)

ê·¸ë¦¬ê³  **ì™„ë£Œë˜ì—ˆìœ¼ë‹ˆ ë‹¤ì‹œ ìˆœíšŒí•˜ë©° Timers Phase ì˜ timerCallback ì„ ì‹¤í–‰í•˜ê²Œ ëœë‹¤. ê·¸ë˜ì„œ ì œì¼ ë¹ ë¥¸ ì‹¤í–‰ì‹œê°„ì´ 105ms ê°€ ë ìˆ˜ ìˆëŠ” ê²ƒ**ì´ë‹¤.
í•˜ì§€ë§Œ ì´ë§ˆì €ë„ ìš´ì˜ì²´ì œì˜ ìŠ¤ë ˆë“œì— ì˜ì¡´í•˜ëŠ” ì‘ì—…ì´ ìˆê¸°ì—, ìŠ¤ë ˆë“œ ìŠ¤ì¼€ì¥´ë§ì— ì˜í•´ ë” ê±¸ë¦´ ìˆ˜ë„ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

ì—¬í•˜íŠ¼ ì´í•´ê°€ ì•ˆê°„ë‹¤ë©´ ê³µì‹ë¬¸ì„œë¥¼ ë³´ëŠ” ê±¸ ì¶”ì²œí•œë‹¤. ì•„ë‹ˆ ì´í•´ê°€ ê°€ë”ë¼ë„ ê³µì‹ë¬¸ì„œë¥¼ ë³´ì!

NodeJS ì´ë²¤íŠ¸ ë£¨í”„ : https://nodejs.org/ko/docs/guides/event-loop-timers-and-nexttick/

ì„¤ëª…ì´ ë‚œì¡í–ˆëŠ”ë° í•´ë‹¹ ê°œë…ì„ ì˜ ëª¨ë¥´ëŠ” ì‚¬ëŒì´ ê½¤ ìˆì–´ì„œ ê¸¸ì–´ì¡Œë‹¤. ì—¬í•˜íŠ¼ Node ë¡œ ìì‹ ì˜ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤ë©´ ì•Œì•„ì•¼ í•˜ì§€ ì•Šë‚˜ ì‹¶ë‹¤...
